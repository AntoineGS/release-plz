"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[426],{9890:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var r=n(5893),t=n(1151);const a={},l="release-pr",i={id:"usage/release-pr",title:"release-pr",description:"The release-plz release-pr command runs release-plz update and",source:"@site/docs/usage/release-pr.md",sourceDirName:"usage",slug:"/usage/release-pr",permalink:"/docs/usage/release-pr",draft:!1,unlisted:!1,editUrl:"https://github.com/MarcoIeni/release-plz/tree/main/website/docs/usage/release-pr.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Update",permalink:"/docs/usage/update"},next:{title:"release",permalink:"/docs/usage/release"}},o={},c=[{value:"PR update",id:"pr-update",level:2},{value:"Gitea",id:"gitea",level:2}];function p(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"release-pr",children:"release-pr"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"release-plz release-pr"})," command runs ",(0,r.jsx)(s.a,{href:"/docs/usage/update",children:(0,r.jsx)(s.code,{children:"release-plz update"})})," and\nopens a GitHub Pull Request that prepares the next release."]}),"\n",(0,r.jsx)(s.p,{children:"When the project maintainer merges the release pull request, the packages are\nready to be published."}),"\n",(0,r.jsxs)(s.p,{children:["Here's an example of a ",(0,r.jsx)(s.a,{href:"https://github.com/MarcoIeni/release-plz/pull/377",children:"PR"}),"\nopened by release-plz in the release-plz GitHub project itself."]}),"\n",(0,r.jsxs)(s.p,{children:["In the following example, I run ",(0,r.jsx)(s.code,{children:"release-plz"})," on the ",(0,r.jsx)(s.code,{children:"release-plz"})," project\nitself.\n",(0,r.jsx)(s.code,{children:"Release-plz"})," opens a PR that increases the version and the changelog of the\npackages with unpublished changes."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:"https://user-images.githubusercontent.com/11428655/160772903-544c7578-7c17-4311-b6ca-a1aefeabe799.gif",alt:"release-plz release-pr"})}),"\n",(0,r.jsxs)(s.p,{children:["To learn more, run ",(0,r.jsx)(s.code,{children:"release-plz release-pr --help"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"pr-update",children:"PR update"}),"\n",(0,r.jsx)(s.p,{children:"If there's already an open release PR:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"If the PR contains commits that are not from bots (except the first one),\nrelease-plz closes the PR to preserve the git history.\nThe update mechanism is simple: overwrite everything and force-push. \ud83d\udca5\nReasoning: changes done by bots are not valuable, so we can overwrite them.\n(Not available on Gitea)."}),"\n",(0,r.jsx)(s.li,{children:"Otherwise, release-plz closes the old PR and opens a new one.\nThis is done to preserve the git history of maintainers' changes.\nRelease-plz also closes the release PR when it cannot update it\n(for example, the force-push fails due to merge conflicts)."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"gitea",children:"Gitea"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"release-plz release-pr"})," also supports creating PRs for repositories hosted on\nGitea with the ",(0,r.jsx)(s.code,{children:"--backend"})," flag:"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.code,{children:"release-plz release-pr --token <gitea application token> --backend gitea"})})]})}function d(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>i,a:()=>l});var r=n(7294);const t={},a=r.createContext(t);function l(e){const s=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);